# 2024-07-09 修复禁卡表管理入口问题

## 问题描述
在管理员界面中，禁卡表管理的入口没有正确显示。虽然在layout.php中已经添加了禁卡表管理的链接，
但由于URL格式不一致，导致无法正确访问禁卡表管理功能。

## 原因分析
问题出现在URL格式的不一致性：

1. 在layout.php中，禁卡表管理的链接使用了正确的URL格式：
   ```php
   <a href="<?php echo BASE_URL; ?>?controller=admin&action=banlist">禁卡表整理</a>
   ```

2. 但在BanlistController中，重定向使用了不同的URL格式：
   ```php
   header('Location: ' . BASE_URL . 'admin/banlist');
   ```

3. 在banlist.php和generate.php视图中，表单提交也使用了不正确的URL格式：
   ```php
   <form action="<?php echo BASE_URL; ?>admin/generate" method="post">
   ```

系统的路由机制（在index.php中）期望URL格式为`?controller=X&action=Y`，但实际使用的是`X/Y`格式，
导致路由无法正确解析，从而无法访问禁卡表管理功能。

## 修复方案
将所有相关文件中的URL格式统一为`?controller=X&action=Y`格式：

1. 修改BanlistController.php中的所有重定向URL
2. 修改admin/banlist.php中的表单提交URL
3. 修改admin/generate.php中的表单提交和链接URL

## 修改内容

### 1. BanlistController.php
将所有的重定向URL从：
```php
header('Location: ' . BASE_URL . 'admin/banlist');
```
修改为：
```php
header('Location: ' . BASE_URL . '?controller=admin&action=banlist');
```

### 2. admin/banlist.php
将表单提交URL从：
```php
<form action="<?php echo BASE_URL; ?>admin/generate" method="post">
```
修改为：
```php
<form action="<?php echo BASE_URL; ?>?controller=admin&action=generate" method="post">
```

同样修改了重置投票的表单URL和卡片详情链接。

### 3. admin/generate.php
将表单提交和返回链接URL从：
```php
<form action="<?php echo BASE_URL; ?>admin/update" method="post">
<a href="<?php echo BASE_URL; ?>admin/banlist" class="btn btn-secondary">返回</a>
```
修改为：
```php
<form action="<?php echo BASE_URL; ?>?controller=admin&action=update" method="post">
<a href="<?php echo BASE_URL; ?>?controller=admin&action=banlist" class="btn btn-secondary">返回</a>
```

## 修复结果
修复后，管理员可以正常看到并访问禁卡表管理功能，所有相关的表单提交和链接都能正确工作。
