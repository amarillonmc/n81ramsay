# 2023-11-09 卡片分页功能实现

## 问题描述
卡片概览页面会输出cdb中的全部卡片，当一个cdb中的卡片数量很多时，页面载入会受到极大影响。需要修正卡片概览逻辑，让卡片分页显示，并允许用户配置一页最多可以显示多少卡片（默认20，可配置10，20，50，100）。

## 实现内容

### 1. 修改 CardParser 类
- 修改了 `getAllCards()` 方法，添加分页支持
- 添加了 `countCardsInDatabase()` 方法，用于计算数据库中的卡片数量
- 修改了 `getCardsFromDatabase()` 方法，添加 LIMIT 和 OFFSET 支持
- 返回值包含卡片列表和分页信息（总数、当前页、每页数量、总页数）

### 2. 修改 Card 模型类
- 更新了 `getAllCards()` 方法，添加分页参数支持
- 保持了与 CardParser 类的接口一致

### 3. 修改 CardController 类
- 添加了分页参数处理
- 添加了每页显示数量验证
- 将分页信息传递给视图

### 4. 修改卡片概览页面
- 添加了分页控件，包括首页、上一页、页码、下一页、末页
- 添加了每页显示数量选择器
- 更新了卡片列表显示逻辑，只显示当前页的卡片

### 5. 添加 CSS 样式
- 添加了分页控件的样式
- 添加了每页显示数量选择器的样式
- 添加了弹性布局工具类

### 6. 添加配置项
- 在 config.php 中添加了 CARDS_PER_PAGE 常量，默认值为 20
- 在 CardController 中使用该常量作为默认值

## 技术说明

### 分页逻辑
- 当查询单个数据库时，使用 SQL 的 LIMIT 和 OFFSET 进行分页，效率较高
- 当查询多个数据库时，先获取所有卡片，然后在内存中进行分页
- 分页参数通过 URL 参数传递，如 `?page=2&per_page=20`

### 分页控件
- 显示当前页附近的页码（前后各2页）
- 当页数较多时，确保至少显示5个页码
- 当前页高亮显示
- 首页和末页始终可见

### 每页显示数量选择器
- 提供4个选项：10、20、50、100
- 选择后自动提交表单，刷新页面
- 选择结果会保存在 URL 参数中

## 使用说明
1. 访问卡片概览页面，默认显示第一页，每页20张卡片
2. 使用分页控件浏览不同页面
3. 使用每页显示数量选择器调整每页显示的卡片数量
4. 当切换数据库时，分页会重置为第一页，但每页显示数量会保持不变
