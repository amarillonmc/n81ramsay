系列投票严格度验证逻辑修正
时间：2024-12-20

## 问题描述
原有的系列投票严格度为2的验证逻辑存在设计问题：
- 设计期望：发起投票的用户必须位于系统后台的作者列表中
- 实际实现：检查对象卡片的作者名称
- 这不符合设计意图

## 修改内容

### 1. 配置文件修改 (config.php)
- 更新 SERIES_VOTING_STRICTNESS 的注释说明
- 新的严格度级别：
  - 0: 所有用户可用
  - 1: 需要填写理由
  - 2: 发起人必须在作者列表中
  - 3: 发起人必须在作者列表中且验证卡片作者

### 2. 控制器修改 (includes/Controllers/VoteController.php)
- 重写验证逻辑，分离发起人验证和卡片作者验证
- 新增 checkInitiatorAuthorization() 方法：检查发起人是否在作者映射表中
- 重写 checkCardAuthorAuthorization() 方法：检查卡片作者验证
- 修改系列投票创建的验证流程，支持严格度3

### 3. 视图文件修改 (includes/Views/votes/create_series.php)
- 更新严格度说明文本
- 为严格度3添加"卡片作者ID"输入栏位
- 显示当前卡片作者信息作为参考

## 新的验证逻辑

### 严格度2：发起人验证
- 只检查发起投票的用户ID是否在系统作者映射表中
- 不检查卡片本身的作者信息
- 查询条件：author_name = 用户ID 或 alias LIKE %用户ID%

### 严格度3：发起人+卡片作者验证
- 在严格度2的基础上，增加卡片作者验证栏位
- 用户需要额外填写"卡片作者ID"
- 验证该作者ID是否与卡片系列的作者信息匹配
- 优先检查数据库作者映射，其次检查卡片描述中的作者信息

## 技术细节

### 数据库查询优化
- checkInitiatorAuthorization() 使用 LIKE 查询支持别名匹配
- 保持原有的卡片作者验证逻辑不变

### 用户界面改进
- 清晰区分发起人验证和卡片作者验证
- 提供当前卡片作者信息作为填写参考
- 更新提示文本，明确验证要求

## 影响范围
- 系列投票功能的权限控制
- 不影响普通投票功能
- 向后兼容现有配置

## 测试建议
1. 测试严格度2：验证只有作者列表中的用户能发起投票
2. 测试严格度3：验证需要正确填写卡片作者ID
3. 测试错误提示：验证各种验证失败情况的错误信息
4. 测试界面显示：确认不同严格度下的界面元素正确显示
