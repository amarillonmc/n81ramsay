高级投票功能实装完成
时间：2025年6月17日 14:30

## 实装内容

### 1. 配置文件修改
- config.php: 添加 ADVANCED_VOTING_ENABLED 配置项

### 2. 数据库结构修改
- includes/Core/Database.php: 为votes表添加 is_advanced_vote 和 card_ids 字段

### 3. 核心功能实现
- includes/Models/Vote.php: 
  * 修改 createVote 方法支持高级投票
  * 添加 getVoteByAdvancedAndEnvironment 方法
- includes/Core/Utils.php: 修改 generateVoteLink 方法支持高级投票

### 4. 控制器修改
- includes/Controllers/VoteController.php:
  * 添加 createAdvanced 方法
  * 添加 showAdvancedVotePreview 方法
  * 添加 confirmAdvancedVote 方法
  * 添加 parseCardIds 方法
  * 修改投票概览和详情处理逻辑

### 5. 视图文件
- includes/Views/votes/index.php: 添加高级投票按钮和样式
- includes/Views/votes/create_advanced.php: 新增高级投票创建页面
- includes/Views/votes/confirm_advanced.php: 新增高级投票确认页面
- includes/Views/votes/vote.php: 修改投票详情页面支持高级投票显示

### 6. 功能特性
- 支持多种卡片ID输入格式（换行、逗号、空格等分隔）
- 自动解析和去重卡片ID
- 预览确认页面显示涉及的所有卡片
- 蓝色色调标识高级投票
- 涉及多张卡片时使用系列投票的理由长度要求

### 7. 文档
- doc/etc/20250617_advanced_voting_implementation.md: 详细实装文档
- doc/etc/20250617_1430_advanced_voting_feature.txt: 本记录文件

## 测试建议
1. 访问投票概览页面，确认"发起高级投票"按钮显示
2. 测试高级投票创建流程
3. 测试多种卡片ID输入格式
4. 确认预览页面正确显示卡片信息
5. 测试投票详情页面的高级投票显示

## 注意事项
- 高级投票功能默认启用，可通过配置关闭
- 涉及多张卡片时理由长度要求与系列投票相同
- 高级投票使用第一张卡片作为代表卡片
- 投票结果将应用到所有涉及的卡片
